# LML Programming Guide

`LML` is a language for coding songs that can be played in the *Play Along*
mode. LML was designed to be easy to write by hand. LML is in early
development, but any code you write today will be future compatible. As new
functionality is added to *Play Along* mode, LML will get new syntax.

Every song on this app is written in LML. Click the **Editor** button to see
how a particular song is written.

## Notes

A note can be added to a song by writing the note's name followed by the
octave. Notes are placed after the last note added, or the beginning of an
empty song. Notes must be separated by white space (new lines, spaces, tabs,
etc.).

    c5 d5 e5

A duration can be specified by appending a period and the multiplier to the end of
a note. The default duration multiplier is `1`, and the default base duration is 1 beat.

    c5.2 d5 d5 e5.4

You can change the base duration using the `dt` (double time), `ht` (half
time), or `tt` (triple time) commands. These take effect until the end of the
song (or block). For example, we can easily write 8th notes with `dt`:

    dt
    c5 d5 c5 d5 c5 d5 e5.2

You can use multiple `dt` (or `ht`) commands to reduce (or increase) duration
even more.

You can move the current position back using the `|` character. This will write
a C Major chord.

    c5 | d5 | e5

Here's how you might write two voices:

    c5 g5 e5.2
    | 
    c4.2 f4.2

Putting a `|` the beginning of the song (or block) has no effect, so another
way to write the above might be:

    | c5 g5 e5.2
    | c4.2 f4.2

A note can be made sharp with `+`, flat with `-`, and natural with `=`. These
note modifiers appear after the note's name, but before the octave.

    c+5 c-5

## Rests

You can insert silence using the rest command, `r`. You can specify a duration
multiplier by including a number after the `r` command. The duration of rests
works the same as notes, their base duration is affected by `dt` and `ht`, and
they have a default base duration of 1 beat.

    c5 r d5.2
    d5 r2 a4

## Blocks

A block is delimited with a `{` and `}`. Blocks can be nested. Blocks adjust
how some of the commands work:

* `|` command will move the position back to the start of the block
* Base duration (adjusted with `dt` and `ht`), will reset to previous value after 

Example:


    {
      {
        dt
        c5 { dt e5 f5 } d5.2 e5 g5 a5 c6
      }
      |
      { ht g4 f4 }
    }

## Measure movements

The measure command, `m`, can be used to move the current position to a
specific measure. It's common to use the `m` command followed by a block to
organize a piece:


    m0 {
      | c5 c5 a5 g5
      | g4.4
    }

    m1 {
      | d5 d5 a5 e5
      | f4.4
    }

## Key Signature

You can specify the number of sharps or flats to use with the `ks` command
followed by a positive or negative number. Notes you write will automatically
be sharp or flat as required by the key signature. You can use the `=` natural
modifier to remove the sharp or flat.

    ks-2
    b5 c5 b=5

## Time Signature

Set the time signature using the `ts` command. This will set `3/4` time.

    ts3/4

    c5 g5 g5

The time signature will change where measure lines appear, and affect how many
*beats* fill up an entire measure. The time signature also affects where
measure movements will place the note position.

## Time Commands

Time commands change the current time multiplier until the end of the song or
block. The time commands are multiplied against the current time multiplier, so
you can repeat the commands to stack the effect.

Notes have a duration in beats from 1 to any number you wish. Time commands
change the duration multiplier which affects the actual length of the note.

When a note is written without a duration specified, it has a length of 1 beat.
Otherwise, any whole number can be specified as the length of a note.

By default, the time multiplier is `1`. In `4/4` time this means each 1 beat
note will be 1 beat long, so a quarter note.

Using **double time**, the multiplier is halved, so each written note of 1 beat
will become a eigth note: `(1 * 0.5) = 0.5`, each note is half a beat.

Here are the time commands:

* `dt` -- Double time
* `ht` -- Double time
* `tt` -- Triple Time


## Chords

The `$` command can be used to specify a chord using a chord symbol. The chord
will take up the entire duration of the block it is placed in. Chords do not
have an octave. The notes of the chord will be automatically generated by a
chord generator if enabled.

The following is a short melody over a G Major and D Minor chord progression.

    {$g c5.2 a5 d5}
    {$dm e5 f5 g5.2}

## Comments

If a `#` appears, then it and any text following will be ignored. You can use
this to add notes to anyone reading the code (aka comments).
